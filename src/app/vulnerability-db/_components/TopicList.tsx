import { format } from 'date-fns';

type Topic = {
  topic: string;
};

export default async function TopicList() {
  const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/topics`);
  const topicList: Topic[] = await response.json();

  const currentDate = new Date();
  const formattedDate = format(currentDate, 'MM.dd HH:m 기준');

  return (
    <div className="flex flex-col gap-[1.6rem]">
      <h2 className="text-[2.4rem] font-bold leading-[2.905rem]">실시간 Topic</h2>
      <span className="text-[1.8rem] font-medium leading-[2.178rem] text-gray-default">
        {formattedDate}
      </span>
      <ul className="w-[34.6rem] rounded-[0.8rem] border border-[#c3c3c3] p-[2rem]">
        {topicList.map((topic, index) => (
          <li
            className="w-[30.6rem] border-b-[0.1rem] border-neutral-10 py-[1.6rem] text-[1.8rem] font-regular leading-[2.178rem] first:text-primary-500"
            key={topic.topic}
          >
            {index + 1}. {topic.topic}
          </li>
        ))}
      </ul>
    </div>
  );
}
