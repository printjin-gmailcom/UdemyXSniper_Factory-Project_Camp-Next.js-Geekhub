import { format } from 'date-fns';

type Topic = {
  topic: string;
};

export default async function TopicList() {
  const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/topics`, {
    cache: 'no-store',
  });
  const topicList: Topic[] = await response.json();

  const currentDate = new Date();
  const formattedDate = format(currentDate, 'MM.dd HH:mm 기준');

  return (
    <div className="flex flex-col gap-[1.6rem]">
      <h2 className="text-[2.4rem] font-bold leading-[2.905rem]">실시간 Topic</h2>
      <span className="text-[1.8rem] leading-[2.178rem] text-[#B7B7B7]">{formattedDate}</span>
      <ul className="rounded-[2rem] border border-gray-middle p-[2rem_3.6rem]">
        {topicList.map(({ topic }, index) => (
          <li
            className="w-[30.6rem] cursor-pointer border-b-[0.1rem] border-neutral-10 py-[1.6rem] text-[1.8rem] leading-[2.178rem] last:border-none hover:text-primary-500"
            key={topic}
          >
            {index + 1}. {topic}
          </li>
        ))}
      </ul>
    </div>
  );
}
